<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="https://jakarta.ee/xml/ns/jakartaee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd"
	version="5.0">
	<welcome-file-list>
		<welcome-file>index.htm</welcome-file>
        <welcome-file>index.html</welcome-file>
        <welcome-file>launch.jsp</welcome-file>
	</welcome-file-list>

	<!-- G.CIP 連携用フィルター設定 -->
	<filter>
		<filter-name>GCIPCheckFilter</filter-name>
		<filter-class>
			promoutil.presentation.filter.GCIPCheckFilter
		</filter-class>
		<init-param>
			<param-name>cip_auth_url</param-name>
			<param-value>https://cipcom.cgn.canon.co.jp/cip/zz/asp/WXZZA820.asp?URI=</param-value>
		</init-param>
		<init-param>
			<param-name>cip_mk_menu_control_flg</param-name>
			<param-value>on</param-value>
		</init-param>
		<init-param>
			<param-name>cip_mk_menu_control_value</param-name>
			<param-value>A</param-value>
		</init-param>
		<!-- G.CIP認証を使用しないクライアントのIPアドレスを指定 -->
		<!-- ワイルドカードとして"*"を使用可能                   -->
		<!-- 複数指定する場合はカンマ区切り                      -->
		<init-param>
			<param-name>cip_exclude_ip_address</param-name>
			<param-value>10.254.62.*,10.254.63.*</param-value>
		</init-param>
		<init-param>
			<param-name>promo_host_url</param-name>
			<param-value>http://sphinx-web.cgn.canon.co.jp:8080</param-value>
		</init-param>
		<!-- testFlg=on の時はpromo_host_urlを使用しない -->
		<init-param>
			<param-name>testFlg</param-name>
			<param-value>off</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>GCIPCheckFilter</filter-name>
		<url-pattern>/app/document/index.jsp</url-pattern>
	</filter-mapping>

	<!-- サーブレットフィルタ -->
	<!-- ============================================= -->
	<!-- セッションタイムアウトチェック -->
	<filter>
		<filter-name>SessionTimeoutCheckFilter</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework.presentation.web.filter.SessionTimeoutCheckFilter
		</filter-class>
		<init-param>
			<param-name>ignoreUrl</param-name>
			<param-value>/login.do</param-value>
		</init-param>
		<init-param>
			<param-name>sessionErrorPage</param-name>
			<param-value>/servlet/XmlErrorMessageServlet</param-value>
		</init-param>
	</filter>
	<!--<filter>
		<filter-name>SessionTimeoutCheckFilter2</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.SessionTimeoutCheckFilter
		</filter-class>
		<init-param>
			<param-name>ignoreUrl</param-name>
			<param-value>/login.do</param-value>
		</init-param>
		<init-param>
			<param-name>sessionErrorPage</param-name>
			<param-value>/servlet/XmlErrorMessageServlet</param-value>
		</init-param>
	</filter>-->

	<!-- WebDAVセッションタイムアウトチェックフィルタ -->
	<filter>
		<filter-name>WebDAVSessionTimeoutCheckFilter2</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.WebDAVSessionTimeoutCheckFilter
		</filter-class>
		<init-param>
			<param-name>COOKIE_KEY_JSESSIONID</param-name>
			<param-value>JSESSIONID</param-value>
		</init-param>
		<init-param>
			<param-name>MAX_AGE</param-name>
			<param-value>86400</param-value>
		</init-param>
	</filter>

	<!-- 文字エンコーディングフィルタ -->
	<filter>
		<filter-name>SetCharacterEncodingFilter2</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.SetCharacterEncodingFilter
		</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
		<init-param>
			<param-name>ignore</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>
	<filter>
		<filter-name>SetCharacterEncodingFilter2ForJSP</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.SetCharacterEncodingFilter
		</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>ISO-8859-1</param-value>
		</init-param>
		<init-param>
			<param-name>ignore</param-name>
			<param-value>true</param-value>
		</init-param>
	</filter>

	<!-- HTTPヘッダー設定フィルタ -->
	<filter>
		<filter-name>SetResponseHeaderFilter2</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.SetResponseHeaderFilter
		</filter-class>
		<init-param>
			<param-name>Cache-Control</param-name>
			<param-value>no-cache,no-store,max-age=0</param-value>
		</init-param>
	</filter>

	<!-- スレッドローカル変数設定フィルタ -->
	<filter>
		<filter-name>SetThreadContextFilter</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework.presentation.web.filter.SetThreadContextFilter
		</filter-class>
	</filter>
	<!--<filter>
		<filter-name>SetThreadContextFilter2</filter-name>
		<filter-class>
			jp.co.ctc_g.eim.framework2.presentation.web.filter.SetThreadContextFilter
		</filter-class>
	</filter>-->

	<!-- サーブレットフィルタ マッピング -->
	<!-- ============================================= -->
	<!-- セッションタイムアウトチェック -->
	<filter-mapping>
		<filter-name>SessionTimeoutCheckFilter</filter-name>
		<url-pattern>*.do</url-pattern>
		<url-pattern>*.mvc</url-pattern>
	</filter-mapping>
	<!--<filter-mapping>
		<filter-name>SessionTimeoutCheckFilter2</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>-->

	<!-- WebDAVセッションタイムアウトチェック -->
	<filter-mapping>
		<filter-name>WebDAVSessionTimeoutCheckFilter2</filter-name>
		<url-pattern>/WebDAVServlet/*</url-pattern>
	</filter-mapping>

	<!-- 文字エンコーディングフィルタ -->
	<filter-mapping>
		<filter-name>SetCharacterEncodingFilter2</filter-name>
		<url-pattern>*.do</url-pattern>
		<url-pattern>*.mvc</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>SetCharacterEncodingFilter2ForJSP</filter-name>
		<url-pattern>*.jsp</url-pattern>
	</filter-mapping>

	<!-- HTTPヘッダー設定フィルタ -->
	<filter-mapping>
		<filter-name>SetResponseHeaderFilter2</filter-name>
		<url-pattern>*.do</url-pattern>
		<url-pattern>*.mvc</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>SetResponseHeaderFilter2</filter-name>
		<url-pattern>/messagebroker/*</url-pattern>
	</filter-mapping>

	<!-- スレッドローカル変数設定フィルタ -->
	<filter-mapping>
		<filter-name>SetThreadContextFilter</filter-name>
		<url-pattern>*.do</url-pattern>
		<url-pattern>*.mvc</url-pattern>
	</filter-mapping>
	<!--<filter-mapping>
		<filter-name>SetThreadContextFilter2</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>-->
	<filter-mapping>
		<filter-name>SetThreadContextFilter</filter-name>
		<url-pattern>/messagebroker/*</url-pattern>
	</filter-mapping>
	<!--<filter-mapping>
		<filter-name>SetThreadContextFilter2</filter-name>
		<url-pattern>/messagebroker/*</url-pattern>
	</filter-mapping>-->
	<filter-mapping>
		<filter-name>SetThreadContextFilter</filter-name>
		<url-pattern>/WebDAVServlet/*</url-pattern>
	</filter-mapping>

	<!-- SpringMVCがアクセスするApplicationContext  -->
	<!-- 複数コンテキストファイルを使用する際は、下記ファイル内へのimportタグにて追加してください。 -->
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>
			/WEB-INF/classes/applicationContext.xml
		</param-value>
	</context-param>

	<!-- リスナ -->
	<!--	=============================================	-->
	<listener>
		<listener-class>
			org.springframework.web.context.ContextLoaderListener
		</listener-class>
	</listener>
	<!--<listener>
		<listener-class>
			jp.co.ctc_g.eim.framework.presentation.web.listener.ApplicationContextLoaderListener
		</listener-class>
	</listener>-->

	<!-- サーブレット -->
	<!--	=============================================	-->
	<!-- Spring MVC -->
	<servlet>
		<servlet-name>mvc</servlet-name>
		<servlet-class>
			org.springframework.web.servlet.DispatcherServlet
		</servlet-class>
		<load-on-startup>1</load-on-startup>
		<multipart-config>
 			<max-file-size>2147483648</max-file-size>
			<max-request-size>4294967296</max-request-size>
			<file-size-threshold>4096</file-size-threshold>
		</multipart-config>
	</servlet>

	<servlet>
		<servlet-name>XmlErrorMessageServlet</servlet-name>
		<servlet-class>jp.co.ctc_g.eim.framework.presentation.web.servlet.XmlErrorMessageServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>XmlUploadResultServlet</servlet-name>
		<servlet-class>jp.co.ctc_g.eim.framework.presentation.web.servlet.XmlUploadResultServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>HtmlErrorMessageServlet</servlet-name>
		<servlet-class>jp.co.ctc_g.eim.framework2.presentation.web.servlet.HtmlErrorMessageServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>JsonErrorMessageServlet</servlet-name>
		<servlet-class>jp.co.ctc_g.eim.framework2.presentation.web.servlet.JsonErrorMessageServlet</servlet-class>
	</servlet>

	<servlet>
		<servlet-name>DocumentHtmlErrorMessageServlet</servlet-name>
		<servlet-class>jp.co.ctc_g.eim.app.document.presentation.servlet.DocumentHtmlErrorMessageServlet</servlet-class>
	</servlet>

	<!-- WebDAV -->
	<servlet>
		<servlet-name>WebDAVServlet</servlet-name>
		<servlet-class>
			jp.co.ctc_g.eim.framework2.presentation.web.servlet.WebDAVServlet
		</servlet-class>
		<init-param>
			<param-name>debug</param-name>
			<param-value>1000</param-value>
		</init-param>
		<init-param>
			<param-name>listings</param-name>
			<param-value>true</param-value>
		</init-param>
		<init-param>
			<param-name>readonly</param-name>
			<param-value>false</param-value>
		</init-param>
		<init-param>
			<param-name>webDAVServiceBeanId</param-name>
			<param-value>documentWebDAVService</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
  	</servlet>

	<!-- サーブレットマッピング -->
	<!--	=============================================	-->
	<!-- Spring MVC -->
	<servlet-mapping>
		<servlet-name>mvc</servlet-name>
		<url-pattern>*.mvc</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>XmlErrorMessageServlet</servlet-name>
		<url-pattern>/servlet/XmlErrorMessageServlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>XmlUploadResultServlet</servlet-name>
		<url-pattern>/servlet/XmlUploadResultServlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>HtmlErrorMessageServlet</servlet-name>
		<url-pattern>/servlet/HtmlErrorMessageServlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>JsonErrorMessageServlet</servlet-name>
		<url-pattern>/servlet/JsonErrorMessageServlet</url-pattern>
	</servlet-mapping>

	<servlet-mapping>
		<servlet-name>DocumentHtmlErrorMessageServlet</servlet-name>
		<url-pattern>/servlet/DocumentHtmlErrorMessageServlet</url-pattern>
	</servlet-mapping>

	<!-- WebDAV -->
	<servlet-mapping>
		<servlet-name>WebDAVServlet</servlet-name>
		<url-pattern>/WebDAVServlet/*</url-pattern>
	</servlet-mapping>

    <display-name>EIMANAGER</display-name>
    <description>EIMANAGER</description>

	<!-- *** EIMANAGER *** -->
	<resource-ref>
		<description>EIMANAGER Database Connection</description>
		<res-ref-name>jdbc/eimdb</res-ref-name>
		<res-type>javax.sql.DataSource</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>
	<resource-ref>
		<description>EIMANAGER Database XA Connection</description>
		<res-ref-name>jdbc/eimdbXa</res-ref-name>
		<res-type>javax.sql.DataSource</res-type>
		<res-auth>Container</res-auth>
	</resource-ref>

	<!-- *** EIMANAGER *** -->
	<!-- Servlet -->
	<servlet>
		<servlet-name>DownloadPrivateDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadPrivateDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadPublicDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadPublicDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ZIPDownloadPrivateDocuments</servlet-name>
		<servlet-class>servlet.dl.ZIPDownloadPrivateDocuments</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>ZIPDownloadMixedDocuments</servlet-name>
		<servlet-class>servlet.dl.ZIPDownloadMixedDocuments</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadMyDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadMyDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownLoadCsvFile</servlet-name>
		<servlet-class>servlet.dl.DownLoadCsvFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownLoadUrlLinkFile</servlet-name>
		<servlet-class>servlet.dl.DownLoadUrlLinkFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadExportList</servlet-name>
		<servlet-class>servlet.dl.DownloadExportList</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadSignencrDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadSignencrDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownLoadOpeHistCSVFile</servlet-name>
		<servlet-class>servlet.dl.DownLoadOpeHistCSVFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>CreateDocumentEx</servlet-name>
		<servlet-class>servlet.external.CreateDocumentEx</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>GetAttributesEx</servlet-name>
		<servlet-class>servlet.external.GetAttributesEx</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>CreateTagEx</servlet-name>
		<servlet-class>servlet.external.CreateTagEx</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>AssignTagEx</servlet-name>
		<servlet-class>servlet.external.AssignTagEx</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownLoadSearchOpeHistCSVFile</servlet-name>
		<servlet-class>servlet.dl.DownLoadSearchOpeHistCSVFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadCirculationSearchCsvFile</servlet-name>
		<servlet-class>servlet.dl.DownloadCirculationSearchCsvFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadPublicLatestDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadPublicLatestDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadPrivateLatestDocument</servlet-name>
		<servlet-class>servlet.dl.DownloadPrivateLatestDocument</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadAccHistCSVFile</servlet-name>
		<servlet-class>servlet.dl.DownloadAccHistCSVFile</servlet-class>
	</servlet>
	<servlet>
		<servlet-name>DownloadAccHistCSVFileWithSearch</servlet-name>
		<servlet-class>servlet.dl.DownloadAccHistCSVFileWithSearch</servlet-class>
	</servlet>

	<!-- Servlet Mapping -->
	<servlet-mapping>
		<servlet-name>DownloadPrivateDocument</servlet-name>
		<url-pattern>/servlet/DownloadPrivateDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadPublicDocument</servlet-name>
		<url-pattern>/servlet/DownloadPublicDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ZIPDownloadPrivateDocuments</servlet-name>
		<url-pattern>/servlet/ZIPDownloadPrivateDocuments</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>ZIPDownloadMixedDocuments</servlet-name>
		<url-pattern>/servlet/ZIPDownloadMixedDocuments</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadMyDocument</servlet-name>
		<url-pattern>/servlet/DownloadMyDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownLoadCsvFile</servlet-name>
		<url-pattern>/servlet/DownLoadCsvFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownLoadUrlLinkFile</servlet-name>
		<url-pattern>/servlet/DownLoadUrlLinkFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadExportList</servlet-name>
		<url-pattern>/servlet/DownloadExportList</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadSignencrDocument</servlet-name>
		<url-pattern>/servlet/DownloadSignencrDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownLoadOpeHistCSVFile</servlet-name>
		<url-pattern>/servlet/DownLoadOpeHistCSVFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadCirculationSearchCsvFile</servlet-name>
		<url-pattern>/servlet/DownloadCirculationSearchCsvFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CreateDocumentEx</servlet-name>
		<url-pattern>/servlet/CreateDocumentEx</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>GetAttributesEx</servlet-name>
		<url-pattern>/servlet/GetAttributesEx</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>CreateTagEx</servlet-name>
		<url-pattern>/servlet/CreateTagEx</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>AssignTagEx</servlet-name>
		<url-pattern>/servlet/AssignTagEx</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownLoadSearchOpeHistCSVFile</servlet-name>
		<url-pattern>/servlet/DownLoadSearchOpeHistCSVFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadPublicLatestDocument</servlet-name>
		<url-pattern>/servlet/DownloadPublicLatestDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadPrivateLatestDocument</servlet-name>
		<url-pattern>/servlet/DownloadPrivateLatestDocument</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadAccHistCSVFile</servlet-name>
		<url-pattern>/servlet/DownloadAccHistCSVFile</url-pattern>
	</servlet-mapping>
	<servlet-mapping>
		<servlet-name>DownloadAccHistCSVFileWithSearch</servlet-name>
		<url-pattern>/servlet/DownloadAccHistCSVFileWithSearch</url-pattern>
	</servlet-mapping>

	<session-config>
		<session-timeout>120</session-timeout>
	</session-config>


    <login-config>
        <auth-method>BASIC</auth-method>
    </login-config>

	<distributable/>

</web-app>