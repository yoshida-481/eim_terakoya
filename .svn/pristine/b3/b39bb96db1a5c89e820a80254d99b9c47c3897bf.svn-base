<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:jee="http://www.springframework.org/schema/jee"
		xsi:schemaLocation="
			http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans.xsd
			http://www.springframework.org/schema/tx
			http://www.springframework.org/schema/tx/spring-tx.xsd
			http://www.springframework.org/schema/aop
			http://www.springframework.org/schema/aop/spring-aop.xsd
			http://www.springframework.org/schema/jee
			http://www.springframework.org/schema/jee/spring-jee.xsd">

	<!-- ====================== -->
	<!-- 関連データ取得プラグイン   -->
	<!-- ====================== -->

	<!-- 関連データ取得プラグイン（ドキュメント用） -->
	<bean id="documentDataGatheringPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.DocumentDataGatheringPlugInImpl">
		<property name="indexAdditionalInfoPlugIn" ref="documentIndexAdditionalInfoPlugIn" />
		<property name="searchDao" ref="objectSearchDao" />
		<property name="relationDao" ref="relationDao2" />
		<property name="relationTypeDao" ref="relationTypeDaoLight2" />
		<property name="attributeTypeDao" ref="attributeTypeDaoLight2" />
		<!-- アプリケーション種別 -->
		<property name="applicationKind" value="${APPLICATION_KIND}" />
		<!-- Solr検索時の結合条件(OR AND IN)の最大数 -->
		<property name="searchConditionsLimit" value="${SOLR_SEARCH_CONDITIONS_LIMIT}" />
	</bean>

	<!-- 関連データ取得プラグイン（フォルダ用） -->
	<bean id="folderDataGatheringPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.FolderDataGatheringPlugInImpl">
		<property name="indexAdditionalInfoPlugIn" ref="folderIndexAdditionalInfoPlugIn" />
		<!-- アプリケーション種別 -->
		<property name="applicationKind" value="${APPLICATION_KIND}" />
	</bean>

	<!-- 関連データ取得プラグイン（タグ用） -->
	<bean id="tagDataGatheringPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.TagDataGatheringPlugInImpl">
		<!-- アプリケーション種別 -->
		<property name="applicationKind" value="${APPLICATION_KIND}" />
	</bean>

	<!-- 関連データ取得プラグイン（ファイル全文用） -->
	<bean id="documentFileDataGatheringPlugIn"
		class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.DocumentFileDataGatheringPlugInImpl"
		parent="generalEIMFileDataPlugIn">
	</bean>

	<!-- 関連データ取得プラグイン（添付ファイル全文用） -->
	<bean id="attachmentFileDataGatheringPlugIn"
		class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.AttachmentFileDataGatheringPlugInImpl"
		parent="generalEIMFileDataPlugIn">
	</bean>

	<!-- ドキュメントインデックス付加情報取得プラグイン -->
	<bean id="documentIndexAdditionalInfoPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.DocumentIndexAdditionalInfoPlugInImpl">
		<property name="fileDao" ref="fileDaoForSearch" />
		<property name="formatDao" ref="formatDaoLight2" />
	</bean>

	<!-- フォルダインデックス付加情報取得プラグイン -->
	<bean id="folderIndexAdditionalInfoPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.FolderIndexAdditionalInfoPlugInImpl">
		<property name="relationDao" ref="relationDao2" />
	</bean>

	<!-- ワークスペース管理者アクセス権限情報取得セキュリティプラグイン -->
	<bean id="workSpaceAdminSecurityPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.WorkSpaceAdminSecurityPlugInImpl">
		<property name="objectTypeService">
			<ref bean="objectTypeService2"/>
		</property>
		<property name="objectService">
			<ref bean="objectService2"/>
		</property>
		<property name="attributeTypeService">
			<ref bean="attributeTypeService2"/>
		</property>
	</bean>

	<!-- ======================== -->
	<!-- セキュリティプラグイン   -->
	<!-- ======================== -->

	<!-- ドキュメントリンク対応ドキュメントセキュリティプラグイン -->
	<bean id="documentSupportsLinkSecurityPlugIn" class="jp.co.ctc_g.eim.app.document.business.service.search.plugin.impl.DocumentSupportsLinkSecurityPlugInImpl">
		<property name="readRoleType" value="READ" />
		<property name="securityDao" ref="securityDao2" />
		<property name="groupDao" ref="groupDaoForDocSearch" />
		<property name="roleDao" ref="roleDaoForDocSearch" />
		<property name="complexDao" ref="complexDao2" />
		<property name="objectDao" ref="objectDao2" />
		<property name="seriesDao">
			<bean parent="seriesDao2">
				<property name="membersDao">
					<bean parent="membersDao2">
						<property name="memberEntryDao">
							<!-- メンバーエントリのエントリIDと役割リストを取得 -->
							<bean parent="memberEntryDao2">
								<property name="itemListForMultiTargetMethod">
									<list>
										<value>MEMBER_ROLE_LIST</value>
									</list>
								</property>
							</bean>
						</property>
					</bean>
				</property>
			</bean>
		</property>
		<property name="userDefGroupIdEIMUserDefGroupPlugInMap">
			<map>
				<entry key="-12000">
					<ref bean="workSpaceAdminSecurityPlugIn"/>
				</entry>
				<entry key="-12001">
					<ref bean="workSpaceAdminSecurityPlugIn"/>
				</entry>
				<entry key="-1001">
					<ref bean="creatorEIMUserDefGroupPlugIn"/>
				</entry>
				<entry key="-1002">
					<ref bean="assignedPersonsEIMUserDefGroupPlugIn"/>
				</entry>
				<entry key="-11000">
					<ref bean="creatorEIMUserDefGroupPlugIn"/>
				</entry>
				<entry key="-11001">
					<ref bean="assignedPersonsEIMUserDefGroupPlugIn"/>
				</entry>
				<entry key="-21001">
					<ref bean="disabledEIMUserDefGroupPlugIn"/>
				</entry>
				<entry key="-21002">
					<ref bean="disabledEIMUserDefGroupPlugIn"/>
				</entry>
			</map>
		</property>
	</bean>

	<!-- ======================== -->
	<!-- インデックス更新サービス -->
	<!-- ======================== -->

	<!-- コンテンツ属性インデックス更新サービス -->
	<bean id="contentIndexUpdateService"
			class="jp.co.ctc_g.eim.app.document.business.service.search.impl.ContentAttributesIndexUpdateServiceImpl"
			parent="indexUpdateService">
	</bean>

	<!-- 添付ファイル全文インデックス更新サービス -->
	<bean id="attachmentIndexUpdateService" class="jp.co.ctc_g.eim.app.document.business.service.search.impl.AttachmentIndexUpdateServiceImpl">
		<property name="objectIndexUpdateDao" ref="fullTextIndexUpdateDao" />
		<property name="searchDao" ref="objectSearchDao" />
	</bean>

</beans>