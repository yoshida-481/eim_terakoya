<?xml version="1.0" encoding="UTF-8"?>
<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation=
		"http://www.springframework.org/schema/beans
		 http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- ======================================================================================== -->
	<!-- Box連携用 Qaurtz設定                                                                     -->
	<!-- ======================================================================================== -->

	<bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean" destroy-method="stop">
		<property name="triggers">
			<list>
				<!-- アーカイブバッチ(ファイルアップロード) -->
				<ref bean="boxArchiveTrigger" />
				<!-- アーカイブバッチ(ファイル削除) -->
				<ref bean="purgeArchivedTrigger" />
			</list>
		</property>
		<property name="autoStartup" value="true" />
		<property name="waitForJobsToCompleteOnShutdown" value="true" />
	</bean>

	<!-- ================================ -->
	<!-- 起動するタイミング（時刻）の指定 -->
	<!-- ================================ -->

	<!-- アーカイブバッチ(ファイルアップロード) -->
	<bean id="boxArchiveTrigger"
		class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
		<property name="jobDetail" ref="boxArchiveJobFactory" />
		<property name="cronExpression" value="0 0 1 * * ?" />
	</bean>

	<!-- アーカイブバッチ(ファイル削除) -->
	<bean id="purgeArchivedTrigger"
		class="org.springframework.scheduling.quartz.CronTriggerFactoryBean">
		<property name="jobDetail" ref="purgeArchivedJobFactory" />
		<property name="cronExpression" value="0 0 4 * * ?" />
	</bean>

	<!-- ============================== -->
	<!-- 起動するJOBクラス・メソッドの指定 -->
	<!-- ============================== -->

	<!-- アーカイブバッチ(ファイルアップロード) -->
	<bean id="boxArchiveJobFactory" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject" ref="boxArchiveJob" />
		<property name="targetMethod" value="executeJob" />
	</bean>

	<!-- アーカイブバッチ(ファイル削除) -->
	<bean id="purgeArchivedJobFactory" class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean">
		<property name="targetObject" ref="purgeArchivedJob" />
		<property name="targetMethod" value="executeJob" />
	</bean>

</beans>